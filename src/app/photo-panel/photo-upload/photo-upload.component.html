<div class="flex flex-col items-center justify-center">
    <input
      type="file"
      #fileInput
      (change)="onFileChange()"
      [attr.accept]="accepted()"
      class="hidden"
    />
    @if (!previewUrl()) {
      <div
        (click)="triggerFileSelect()"
        class="w-full h-80 border-2 border-dashed border-slate-600 rounded-xl flex flex-col items-center justify-center text-slate-400 hover:bg-slate-700/50 hover:border-slate-500 transition-colors cursor-pointer"
      >
        <app-photo-icon class="w-16 h-16 text-slate-500" />
        <p class="mt-4 font-semibold">Click to upload an image</p>
        <p class="text-sm">PNG, JPG, JPEG or WEBP</p>
      </div>
    } @else {
      <div class="w-full group relative">
          <img
              [src]="previewUrl()!"
              alt="Selected preview"
              class="w-full h-auto max-h-96 object-contain rounded-xl shadow-lg"
          />
          <div class="flex flex-col absolute top-3 right-6">
           <button
              (click)="triggerFileSelect()" aria-label="Select a new image"
              class="mb-2 btn-image-selector"
           >
              Change Image
           </button>
           <button
              (click)="removeFile()" aria-label="Remove the image"
              class="btn-image-selector"
           >
              Remove Image
           </button>
           </div>
      </div>
    }
     <button
      (click)="generate.emit()"
      [disabled]="!previewUrl() || isLoading()"
      class="mt-6 w-full flex items-center justify-center btn-audio"
    >
      @if (isLoading()) {
        <app-spinner-icon class="animate-spin h-5 w-5" />
      }
      {{ isLoading() ? 'Analyzing...' : 'Generate Description' }}
    </button>
</div>
